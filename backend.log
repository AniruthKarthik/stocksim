INFO:     Started server process [41702]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
DEBUG: Connecting to DB using DATABASE_URL (Host: ep-hidden-tree-a18p5m48-pooler.ap-southeast-1.aws.neon.tech)
DEBUG: Connecting to DB using DATABASE_URL (Host: ep-hidden-tree-a18p5m48-pooler.ap-southeast-1.aws.neon.tech)
DB Connection Pool Initialized
DB Connection Pool Initialized
Updating currency rates...
Updating currency rates...
Rates updated.
Error in rate update: trying to put unkeyed connection
Rates updated.
INFO:     127.0.0.1:42948 - "GET /currencies HTTP/1.1" 200 OK
Updating currency rates...
INFO:     127.0.0.1:42932 - "GET /simulation/status?portfolio_id=1 HTTP/1.1" 200 OK
Rates updated.
INFO:     127.0.0.1:42948 - "GET /currencies HTTP/1.1" 200 OK
INFO:     127.0.0.1:42932 - "POST /users HTTP/1.1" 200 OK
INFO:     127.0.0.1:42932 - "POST /portfolio/create HTTP/1.1" 200 OK
DEBUG: Starting simulation for user 2, portfolio 2
INFO:     127.0.0.1:42932 - "POST /simulation/start HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:42932 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:42932 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:42932 - "POST /simulation/update_budget HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:42932 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:42932 - "POST /simulation/forward HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:42932 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
DEBUG: Fetched 446 assets as of None
INFO:     127.0.0.1:42932 - "GET /assets HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:51918 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
DEBUG: Fetched 262 assets as of 2000-11-10
INFO:     127.0.0.1:51918 - "GET /assets?date=2000-11-10 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:51918 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51928 - "GET /assets/A HTTP/1.1" 200 OK
DEBUG: Fetching history for A until 2000-11-10
Updating currency rates...
DEBUG: Found 219 data points
INFO:     127.0.0.1:51928 - "GET /price/history?symbol=A&end_date=2000-11-10 HTTP/1.1" 200 OK
Rates updated.
INFO:     127.0.0.1:51918 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51928 - "GET /assets/A HTTP/1.1" 200 OK
DEBUG: Fetching history for A until 2000-11-10
Updating currency rates...
DEBUG: Found 219 data points
INFO:     127.0.0.1:51928 - "GET /price/history?symbol=A&end_date=2000-11-10 HTTP/1.1" 200 OK
Rates updated.
INFO:     127.0.0.1:51918 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:51918 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51918 - "OPTIONS /portfolio/buy HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:60528 - "POST /portfolio/buy HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:60528 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:60528 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:60528 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:60528 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48514 - "POST /simulation/forward HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:48514 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:48514 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
DEBUG: Fetched 443 assets as of 2021-10-10
INFO:     127.0.0.1:48514 - "GET /assets?date=2021-10-10 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:38560 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:38560 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:40638 - "GET /simulation/status?portfolio_id=2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58162 - "POST /reset HTTP/1.1" 500 Internal Server Error
INFO:     127.0.0.1:46280 - "OPTIONS /users HTTP/1.1" 200 OK
INFO:     127.0.0.1:46284 - "POST /users HTTP/1.1" 200 OK
INFO:     127.0.0.1:46284 - "OPTIONS /portfolio/create HTTP/1.1" 200 OK
INFO:     127.0.0.1:46280 - "POST /portfolio/create HTTP/1.1" 200 OK
INFO:     127.0.0.1:46280 - "OPTIONS /simulation/start HTTP/1.1" 200 OK
DEBUG: Starting simulation for user 3, portfolio 3
INFO:     127.0.0.1:46284 - "POST /simulation/start HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:46284 - "GET /simulation/status?portfolio_id=3 HTTP/1.1" 200 OK
Updating currency rates...
Rates updated.
INFO:     127.0.0.1:46284 - "GET /simulation/status?portfolio_id=3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46284 - "POST /reset HTTP/1.1" 500 Internal Server Error
